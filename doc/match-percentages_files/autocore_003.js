
			// File : /okcontent/js/components/products.js
			AUTOCORE_SELF_CHECK = "/okcontent/js/components/products.js";
			
var Product=Class.create({initialize:function(params){if(!params||!params.productid){console.log('Product initialization: no params or product!');return;}
this.productid=params.productid;this.hasbilling=params.hasbilling||false;this.successaction=params.successaction;},set_shadowbox:function(box){this.shadowbox=box;},add_cf:function(cf){if(!cf||cf=='')return;var inputs=[],input;inputs=inputs.concat($(this.productid+'_purchase_form').select('input[name="cf"]'),$(this.productid+'_form').select('input[name="cf"]'));for(var i=0;i<inputs.length;i++){input=inputs[i];if(input.value!=''){cf=','+cf;}
input.value=input.value+cf;}},remove_cf:function(cf){if(!cf||cf=='')return;var inputs=[],input;inputs=inputs.concat($(this.productid+'_purchase_form').select('input[name="cf"]'),$(this.productid+'_form').select('input[name="cf"]'));for(var i=0;i<inputs.length;i++){var regex=new RegExp(cf,'gi')
input=inputs[i];input.value=input.value.replace(regex,'');}},open:function(){if(this.hasbilling){util.verticallyCenter(this.shadowbox.id);this.shadowbox.send(this.productid+'_form').open();}else{this.go_to_billing();}},on_open:function(){if($(this.productid+'_promo'))
$(this.productid+'_promo').hide();},on_close:function(){},on_message:function(message){try{var response=message.evalJSON();}catch(e){}
if(response&&response.status){this.shadowbox.sendJSON({button_off:true});setTimeout(function(){this.shadowbox.close();this.successaction();}.bind(this),2000);}},go_to_billing:function(errorcode){if(!$(this.productid+'_purchase_form')){console.log(this.productid+': no purchase form!');return;}
var form=$(this.productid+'_purchase_form');if(errorcode){var errorinput=new Element('input',{type:'hidden',name:'errorcode',value:errorcode});form.insert({bottom:errorinput});}
form.submit();}});
			AUTOCORE_SELF_CHECK = null;
		
			// File : /okcontent/js/components/passwordShadowbox.js
			AUTOCORE_SELF_CHECK = "/okcontent/js/components/passwordShadowbox.js";
			
var PasswordShadowbox=Class.create({initialize:function(config){this.id=config.id;this.shadowbox=$(config.id);this.close_btn=this.shadowbox.down(".close");this.feedback=$(config.id+"_feedback");this.callback=config.callback;this.open_cb=config.open?config.open:"";this.close_cb=config.close?config.close:"";this.close_btn.observe("click",this.close.bind(this));this.billingaction=config.billingaction||null;this.secure_prefix=config.secure_prefix?config.secure_prefix:"";this.socket=new Port.socket({name:config.id+"_iframe",origin:this.secure_prefix,proxy:this.secure_prefix+"/password_shadowbox_proxy_secure.html",channel:config.channel,callback:this.on_message.bind(this)});this.ignore=config.ignore.split(',');},params:{},ready:false,on_message:function(message){try{var response=message.evalJSON();}catch(e){}
if(!this.ready){this.ready=true;}
if(response){if(response.resetpw){if(response.resetpw=='SUCCESS'){this.feedback.removeClassName("invalid").show().down(".message").update('We emailed you a Reset Password link!');}else{this.feedback.addClassName("invalid").show().down(".message").update('Something went awry; try again later!');}}
else if(!response.status){var error=response.messages[0];this.feedback.addClassName("invalid").show().down(".message").update(error.text);if(error.text===""){this.feedback.hide();}
var shouldignore=false;for(var i=0;i<this.ignore.length;i++){if(this.ignore[i]!=''&&error.code.indexOf(this.ignore[i])!=-1){shouldignore=true;}}
if(!shouldignore&&error.code!='PASSWORD_INVALID'&&error.code!='PASSWORD_EMPTY'&&error.info){error.info.useNewBilling=1;error.info.errorcode=error.code;this.redirect_purchase(error.info);}}else{this.feedback.hide();this.callback(message);}}},toggleBillType:function(){if(!this.id||!$(this.id+'_check')||!$(this.id+'_iframe')||!$(this.id+'_continue'))return;if($(this.id+'_check').checked){$(this.id+'_iframe').show();$(this.id+'_continue').hide();}else{$(this.id+'_iframe').hide();$(this.id+'_continue').show();}},validate_response:function(messages){var res,msg;if(messages&&messages.length){res=false;msg=messages[0];}else{res=true;msg="";}
return{result:res,message:msg};},redirect_purchase:function(params){this.feedback.hide();this.shadowbox.down(".loader").show();if(params.usebillingaction&&this.billingaction&&typeof(this.billingaction)=='function'){this.billingaction(params.errorcode);}else{var path="/purchase?",query=Object.toQueryString(params);window.location=this.secure_prefix+path+query;}},open:function(){if(this.ready){this.shadowbox.show();if(this.open_cb){this.open_cb();}}
return this;},close:function(){this.shadowbox.hide();if(this.close_cb){this.close_cb();}
return this;},send:function(id){if(this.ready){var params=$(id).serialize(true);if(Object.toJSON(this.params)!==Object.toJSON(params)){this.params=params;this.socket.send(this.params);}}
return this;},sendJSON:function(message){if(this.ready){this.socket.send(message);}
return this;},center:function(){var sb_parent=this.shadowbox.up(),sb_offset=(document.viewport.getHeight()-this.shadowbox.getHeight())>>1,viewport_offset=document.viewport.getScrollOffsets().top,sb_parent_offset=sb_parent.cumulativeOffset().top,top_offset=sb_offset+viewport_offset-sb_parent_offset;if(!this.shadowbox.visible()){this.shadowbox.setStyle({top:top_offset+"px"});}
return this;}});var PasswordShadowboxForm={api:"",channel:"",params:{},init:function(api,channel,prefix){this.api=api;this.channel=channel;this.password=$("password_form_input");this.submit_btn=$("password_form_submit");this.insecure_prefix=prefix;this.socket=new Port.socket({origin:this.insecure_prefix,proxy:this.insecure_prefix+"/password_shadowbox_proxy_insecure.html",channel:this.channel,callback:this.on_message.bind(this)});this.form_on();},on_message:function(message){if(message.button_off){this.button_off();delete message.button_off;}
if(message.button_on){this.button_on();delete message.button_on;}
this.params=message;},form_on:function(){this.button_on();this.submit_btn.observe("click",this.submit.bind(this));this.password.observe("focus",this.password_on_focus.bindAsEventListener(this)).observe("keydown",this.password_on_keydown.bindAsEventListener(this));},form_off:function(){this.submit_btn.stopObserving();this.password.stopObserving();this.button_off();},button_on:function(){var button=$('password_form_submit');if(button.getAttribute('data-text'))
button.down('a').innerHTML=button.getAttribute('data-text');button.addClassName('green').removeClassName('gray');},button_off:function(){var button=$('password_form_submit');button.setAttribute('data-text',button.down('a').innerHTML);button.down('a').innerHTML='Submitting&hellip;';button.addClassName('gray').removeClassName('green');},password_on_focus:function(evt){this.remove_error_styles();},password_on_keydown:function(evt){this.remove_error_styles();return evt.keyCode===13?this.submit():false;},remove_error_styles:function(){var message=Object.toJSON({status:0,messages:[{code:"HIDE_FEEDBACK",text:""}]});this.password.up().removeClassName('error').removeClassName('forgotmsg').removeClassName('showforgot');this.socket.send(message);},validate_password:function(){var res,msg={code:"",text:""};if(this.password.value===""){res=false;msg.code="PASSWORD_EMPTY";msg.text="Enter your password to buy this thing!";}
else if(this.password.value.match(/\s/)){res=false;msg.code="PASSWORD_HAS_SPACE";msg.text="Password can&rsquo;t contain spaces!";}
else if(this.password.value.length<6){res=false;msg.code="PASSWORD_SHORT";msg.text="Password must be at least 5 characters!";}
else{res=true;}
return{result:res,message:msg};},submit:function(){var ok=this.validate_password();if(!ok.result){var message=Object.toJSON({status:0,messages:[ok.message]});this.password.up().addClassName("error");this.socket.send(message);}
else{this.password.up().removeClassName("error");this.params.password=this.password.value.strip();this.params.okc_api=1;this.form_off();new Ajax.Request(this.api,{parameters:this.params,onSuccess:this.submit_cb.bindAsEventListener(this)});}},submit_cb:function(transport){try{var response=transport.responseText.evalJSON();}catch(e){}
if(response){if(!response.status){var error=response.messages[0];if(error.code!=="NEEDS_BILLING_INFO"){this.password.up().addClassName("error");}}
else{this.password.setValue("");}}
this.socket.send(transport.responseText);this.form_on();}};
			AUTOCORE_SELF_CHECK = null;
		
			// File : /okcontent/js/modules/port.js
			AUTOCORE_SELF_CHECK = "/okcontent/js/modules/port.js";
			
var Port=Port||{};Port.socket=function(config){if(!(this instanceof Port.socket)){return new Port.socket(config);}
var name=config.name?config.name:"",origin=config.origin?config.origin:"",proxy=config.proxy?config.proxy:"",channel=config.channel?config.channel:"global",callback=config.callback?config.callback:"";var has_postMessage=Port.detect.postMessage(),log=function(origin,channel,message){};var base,modern,legacy;base={origin:window.location.protocol+"//"+window.location.host,receive:function(message){if(message.origin===origin){try{var response=message.data.evalJSON();}catch(error){log(message.origin,channel,error);}
if(response&&response.channel===channel){if(typeof callback==="function"){callback(response.message);}
log(message.origin,response.channel,response.message);}}}};modern={init:function(){Event.observe(window,"message",this.receive.bind(this));log(this.origin,channel,"Modern support enabled");this.target_window=this.get_target_window();if(!name){Event.observe(window,"load",this.send.bind(this,"Socket ready"));}},send:function(message){var json=this.serialize(message);this.target_window.postMessage(json,origin);},serialize:function(message){return Object.toJSON({message:message,channel:channel});},get_target_window:function(){return name?window[name]:window.top;}};legacy={init:function(){Port.proxy.listeners.push(this.receive.bind(this));log(this.origin,channel,"Legacy support enabled");this.target_window=this.get_target_window();if(!name){Event.observe(window,"load",this.send.bind(this,"Socket ready"));}},send:function(message){var json=this.serialize(message);this.target_window.writeAttribute({src:this.get_src()+"#"+encodeURIComponent(json)});setTimeout(function(){this.target_window.setStyle({height:this.target_window.getHeight()>50?"50px":"100px"});}.bind(this),0);},serialize:function(message){return Object.toJSON({data:{message:message,channel:channel},origin:this.origin});},get_target_window:function(){var attributes={src:this.get_src(),frameBorder:"0",scrolling:"no",width:"50px",height:"50px",style:"position:absolute;top:-999px;left:0;"},iframe=new Element("iframe",attributes);$(document.body).insert(iframe);return iframe;},get_src:function(){return name?proxy+"?name="+name:proxy;}};if(has_postMessage){Object.extend(base,modern);}else{Object.extend(base,legacy);}
base.init();return base;};Port.proxy={listeners:[],init:function(name){Event.observe(window,"resize",this.send.bind(this));this.target_window=this.get_target_window(name);},send:function(){if(window.location.hash.length>0){var json=this.serialize(window.location.hash.replace(/^#/,""));this.target_window.Port.proxy.receive(json);}},receive:function(message){for(var i=0;i<this.listeners.length;i++){this.listeners[i](message);}},serialize:function(message){var json=decodeURIComponent(message).evalJSON();json.data=Object.toJSON(json.data);return json;},get_target_window:function(name){return name?window.top.frames[name]:window.top;}};Port.detect={is_host_method:function(obj,method){var type=typeof obj[method];return type==="function"||(type==="object"&&!!obj[method]);},is_host_property:function(obj,prop){return prop in obj;},postMessage:function(){return this.is_host_method(window,"postMessage")&&this.is_host_property(window,"onmessage");}};
			AUTOCORE_SELF_CHECK = null;
		
addNewCoresToCookie(["17", "19", "38"], "44f0be9a");